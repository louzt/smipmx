---
import ParallaxSection from './ParallaxSection.astro';

const clients = [
    {
        name: "Edscha San Luis",
        logo: "/images/assets/clientes/descargar (6).png"
    },
    {
        name: "General Motors",
        logo: "/images/assets/clientes/descargar (7).png"
    },
    {
        name: "USG",
        logo: "/images/assets/clientes/USGlatamblog-logo-b.png"
    },
    {
        name: "TIMS",
        logo: "/images/assets/logotipo negro para fondo blanco.png"
    }
];
---

<section id="clientes" class="clients-section min-h-screen relative overflow-hidden">
    <ParallaxSection
        imagePath="/images/assets/fotos impactantes/horizontales/the-laser-cuts-ge02f36024_1280.png"
        height="100vh"
        title="Nuestros Clientes"
        subtitle="Empresas líderes confían en nosotros"
    >
        <div class="carousel-container relative mt-12 max-w-4xl mx-auto">
            <div class="clients-carousel snap-y snap-mandatory overflow-y-auto h-[60vh] relative">
                {clients.map((client, index) => (
                    <div class="snap-start min-h-full flex items-center justify-center p-8 fade-in hover-lift" 
                         style={`animation-delay: ${index * 200}ms;`}>
                        <div class="bg-white/90 backdrop-blur-sm rounded-lg p-8 w-full max-w-md transform hover:scale-105 transition-transform duration-300">
                            <img 
                                src={client.logo} 
                                alt={client.name}
                                class="w-full h-auto max-h-32 object-contain mx-auto filter drop-shadow-lg"
                            />
                        </div>
                    </div>
                ))}
            </div>

            <!-- Scroll Indicators -->
            <div class="absolute right-4 top-1/2 -translate-y-1/2 flex flex-col gap-2">
                {clients.map((_, index) => (
                    <button 
                        class="w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-colors duration-300"
                        data-index={index}
                        aria-label={`Ver cliente ${index + 1}`}>
                    </button>
                ))}
            </div>
        </div>
    </ParallaxSection>
</section>

<style>
    .clients-carousel {
        scrollbar-width: none;
        -ms-overflow-style: none;
    }

    .clients-carousel::-webkit-scrollbar {
        display: none;
    }

    .clients-carousel > div {
        scroll-snap-align: center;
    }
</style>

<script>
    const carousel = document.querySelector('.clients-carousel');
    const slides = document.querySelectorAll('.clients-carousel > div');
    const indicators = document.querySelectorAll('[data-index]');
    
    indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => {
            slides[index].scrollIntoView({ behavior: 'smooth' });
        });
    });

    // Update indicators based on scroll position
    if (carousel) {
        carousel.addEventListener('scroll', () => {
            const currentScroll = carousel.scrollTop;
            const slideHeight = carousel.clientHeight;
            const currentIndex = Math.round(currentScroll / slideHeight);
            
            indicators.forEach((indicator, index) => {
                if (index === currentIndex) {
                    indicator.classList.add('bg-white');
                    indicator.classList.remove('bg-white/50');
                } else {
                    indicator.classList.remove('bg-white');
                    indicator.classList.add('bg-white/50');
                }
            });
        });
    }
</script>